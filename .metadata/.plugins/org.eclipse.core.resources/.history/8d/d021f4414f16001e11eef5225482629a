from PyQt5 import QtWidgets, uic
import sys
from random import random, sample
from PyQt5.QtWidgets import QMessageBox
form_window = uic.loadUiType("myqt08.ui")[0]

class UiMainWindow(QtWidgets.QMainWindow, form_window):
    
    com = ""
    mine = ""
    
    def __init__(self):
        super().__init__()
        self.setupUi(self)
        self.show()
        self.randomBall()
        self.pb.clicked.connect(self.playGame)
    
    def playGame(self):
        self.mine = self.le.text()
        print(self.mine)
        s = self.strike()
        b = self.ball()
        
        str_old = self.te.text()
        str_new = self.mine + "   " + str(s) + "s" + str(b) + "b" + "\n"
        
        self.te.setText(str_new + str_old)
        self.le.clear()
        
        if(s==3):
            QMessageBox.about(self, 'Game', '정답입니다!')
    
    def randomBall(self):
        arr = sample(range(1, 10), 3)
        self.com = "".join(str(num) for num in arr)
        print(self.com)
        
    def strike(self):
        ret = 0
        
        c1 = self.com[0:1]
        c2 = self.com[1:2]
        c3 = self.com[2:3]
        
        m1 = self.mine[0:1]
        m2 = self.mine[1:2]
        m3 = self.mine[2:3]
        
        if c1 == m1:
            ret += 1
        if c2 == m2:
            ret += 1
        if c3 == m3:
            ret += 1
             
        return ret;
        
        
    def ball(self):
        ret = 0
        
        c1 = self.com[0:1]
        c2 = self.com[1:2]
        c3 = self.com[2:3]
    
        m1 = self.mine[0:1]
        m2 = self.mine[1:2]
        m3 = self.mine[2:3]
        
        if c1 == m2 or c1 == m3:
            ret += 1
        if c2 == m1 or c2 == m3:
            ret += 1
        if c3 == m1 or c3 == m2:
            ret += 1
        return ret;
        
if __name__ == "__main__":
    app = QtWidgets.QApplication(sys.argv)
    main_window = UiMainWindow()
    sys.exit(app.exec_())

    