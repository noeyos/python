from PyQt5 import QtWidgets, uic
import sys
from random import sample
from PyQt5.QtWidgets import QMessageBox

form_window = uic.loadUiType("myqt08.ui")[0]

class UiMainWindow(QtWidgets.QMainWindow, form_window):
    com = ""
    
    def __init__(self):
        super().__init__()
        self.setupUi(self)
        self.show()
        self.random()
        self.pb.clicked.connect(self.playGame)
    
    def playGame(self):
        mine = self.le.text()
        s = self.strike(mine)
        b = self.ball(mine)
        
        str_old = self.te.text()
        str_new = mine + "   " + str(s) + "s" + str(b) + "\n"
        
        self.te.setText(str_new + str_old)
        self.le.clear()
        
        if s == 3:
            QMessageBox.about(self, 'Game', '정답입니다!')
    
    def random(self):
        arr = sample(range(1, 10), 3)
        self.com = "".join(str(num) for num in arr)
        
    def strike(self, mine):
        ret = 0
        
        c1 = self.com[0:1]
        c2 = self.com[1:2]
        c3 = self.com[2:3]
        
        m1 = mine[0:1]
        m2 = mine[1:2]
        m3 = mine[2:3]
        
        if c1 == m1:
            ret += 1
        if c2 == m2:
            ret += 1
        if c3 == m3:
            ret += 1
             
        return ret
        
    def ball(self, mine):
        ret = 0
        
        c1 = self.com[0:1]
        c2 = self.com[1:2]
        c3 = self.com[2:3]
    
        m1 = mine[0:1]
        m2 = mine[1:2]
        m3 = mine[2:3]
        
        if c1 == m2 or c1 == m3:
            ret += 1
        if c2 == m1 or c2 == m3:
            ret += 1
        if c3 == m1 or c3 == m2:
            ret += 1
        
        return ret
        
if __name__ == "__main__":
    app = QtWidgets.QApplication(sys.argv)
    main_window = UiMainWindow()
    sys.exit(app.exec_())

